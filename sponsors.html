<!-- Sponsors Start -->
<div class="container-fluid py-5 sponsors-section" style="background-color: #fff;">
    <div class="container py-5">
        <div class="mx-auto text-center mb-5 wow fadeIn" data-wow-delay="0.1s" style="max-width: 700px;">
            <h1 class="display-3" data-i18n="sponsors.title">Våra Sponsorer</h1>
            <p class="text-muted" data-i18n="sponsors.description">Tack till våra generösa sponsorer som stödjer vår verksamhet</p>
        </div>
        <div class="sponsors-carousel owl-carousel wow fadeIn" data-wow-delay="0.3s">
            <!-- Sponsor logos loaded dynamically from img/sponsors/ -->
        </div>
    </div>
</div>
<!-- Sponsors End -->

<script>
/**
 * Sponsors Carousel Initialization
 * This file handles the initialization of the sponsors carousel using OwlCarousel
 */

(function ($) {
    'use strict';

    // Initialize sponsors carousel when document is ready
    $(function () {
        const $carousel = $('.sponsors-carousel');
        const sponsorLogos = [
            'sponsor-logo-1.jpg',
        ];
        let carouselInterval = null;

        function initializeCarousel(sponsorLogos) {
            if (sponsorLogos && sponsorLogos.length > 0) {
                $carousel.empty();
                
                if ($carousel.hasClass('owl-loaded')) {
                    $carousel.trigger('destroy.owl.carousel');
                    $carousel.removeClass('owl-carousel owl-loaded');
                    $carousel.addClass('owl-carousel');
                }
                
                if (carouselInterval) {
                    clearInterval(carouselInterval);
                }

                sponsorLogos.forEach((logo, index) => {
                    const sponsorItem = `
                        <div class="sponsor-item">
                            <img src="img/sponsors/${logo}" alt="Sponsor ${index + 1}" class="img-fluid">
                        </div>
                    `;
                    $carousel.append(sponsorItem);
                });

                const isRTL = $('html').attr('dir') === 'rtl';
                
                $carousel.owlCarousel({
                    items: 5,
                    loop: true,
                    margin: 30,
                    autoplay: true,
                    autoplayTimeout: 0,
                    autoplaySpeed: 10000,
                    autoplayHoverPause: false,
                    smartSpeed: 10000,
                    fluidSpeed: true,
                    nav: false,
                    dots: false,
                    mouseDrag: false,
                    touchDrag: false,
                    pullDrag: false,
                    freeDrag: false,
                    rtl: isRTL,
                    responsive: {
                        0: { items: 2 },
                        576: { items: 3 },
                        768: { items: 4 },
                        992: { items: 5 },
                        1200: { items: 6 }
                    }
                });
                
                carouselInterval = setInterval(function() {
                    $carousel.trigger('next.owl.carousel');
                }, 1000);
            }
        }

        // Expose reinitialize function globally
        window.reinitializeSponsors = function() {
            const items = $carousel.find('.sponsor-item img');
            if (items.length > 0) {
                const logos = [];
                items.each(function() {
                    const src = $(this).attr('src');
                    const filename = src.split('/').pop();
                    logos.push(filename);
                });
                initializeCarousel(logos);
            } else {
                initializeCarousel(sponsorLogos);
            }
        };

        // Initialize carousel on page load
        initializeCarousel(sponsorLogos);
    });

})(jQuery);
</script>
